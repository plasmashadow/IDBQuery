function Deferred(){this._done=[],this._fail=[]}function Thread(){function a(a,b){this.process=a;var c=window.URL;return this.blob=c.createObjectURL(new Blob(["(",a,").apply(null,[",b,"])"],{type:"application/javascript"})),id=Math.floor(1e9*Math.random()),[id,this.blob]}var b=this;b.tasks={},b.addTask=function(b,c){var d=a(b,c);this.tasks[d[0]]=d[1]},b.start=function(){for(task in this.tasks){{var a=this.tasks[task];new Worker(a)}delete this.tasks[task]}}}function Tasks(){this._tasks=[],this.length=0,this._thread=new Thread}!function(){function a(a){function b(a){{var b=indexedDB.open(a,c.version);parseInt(b.version)}c.version=c.version+1}var c=this;c.tables=[],c.name=a,c.version=0,b(a)}Object.defineProperty(window,"IDB",{value:new Object,writable:!0,configurable:!1}),Object.defineProperty(IDB,"dblist",{value:new Object,writable:!0,configurable:!1}),IDB.Database=new a}(),function(){function a(a,b){var c=this;c.base=a,c.name=b.name,c.properties=b.properties,c.foreignKeys=b.foreignKeys}a.prototype={createTable:function(){}},IDB.Table=a}();var indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,Transaction=window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,KeyRange=window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;!function(){function a(a){var b=this;b.name=a.name,b.type=a.type,b.isKey=a.key,b.isauto=a.auto,b.foreignKey=null,b.relatedTables=[]}a.prototype={isValid:function(a,b){if(this.name==a&&this.type==typeof b)return!0;throw new SyntaxError(a+","+b+"is not a valid input")},setForeignKey:function(a){return _me.foreignKey=!0,_me.relatedTables=IDB.dblist[a],!0}}}(),Deferred.prototype={execute:function(a,b){var c=a.length;for(console.log(a),b=Array.prototype.slice.call(b),console.log(b);c--;)a[c].apply(null,b)},resolve:function(){this.execute(this._done,arguments)},reject:function(){this.execute(this._fail,arguments)},done:function(a){this._done.push(a)},fail:function(a){this._fail.push(a)}},Queue.prototype={addTask:function(a,b){this._tasks.push({func:a,params:b}),this.length++},runQueue:function(){for(var a=0;a<this.len;a++)this._tasks[a].func.apply(null,this.tasks[a].params)},runParllel:function(){}};
